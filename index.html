<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Uni Notes</title>
  <link rel="stylesheet" href="style.css">
  <style>
    :root {
      --bg: #ffffff; --text: #000; --link: #0645ad; --sidebar-bg: #f3f3f3; --border: #ddd;
      --muted: #666;
    }
    body.dark {
      --bg: #121212; --text: #f0f0f0; --link: #80b3ff; --sidebar-bg: #1e1e1e; --border: #333;
      --muted: #aaa;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background .25s, color .25s;
    }
    /* ===== Desktop layout ===== */
    .sidebar {
      width: 240px;
      height: 100vh;
      background: var(--sidebar-bg);
      padding: 16px;
      float: left;
      border-right: 1px solid var(--border);
      box-sizing: border-box;
      position: sticky;
      top: 0;
    }
    .sidebar h2 { margin: 0 0 10px; font-size: 18px; }
    .sidebar ul { list-style: none; margin: 0; padding: 0; }
    .sidebar li { margin-bottom: 8px; }
    .sidebar a {
      text-decoration: none; color: var(--text);
      display: block; padding: 6px 8px; border-radius: 6px;
    }
    .sidebar a:hover { background: rgba(0,0,0,0.06); }
    body.dark .sidebar a:hover { background: rgba(255,255,255,0.08); }
    .sidebar a.active { outline: 2px solid var(--border); }
    .toggle-wrap { margin-top: 16px; }

    .content { margin-left: 240px; padding: 20px; box-sizing: border-box; }
    h1 { margin-top: 0; }
    #intro { color: var(--muted); margin-bottom: 14px; }
    #search {
      width: 100%; padding: 8px; border: 1px solid var(--border);
      border-radius: 6px; background: var(--bg); color: var(--text);
    }
    .group { margin-top: 18px; }
    .group h2 { margin: 16px 0 8px; font-size: 20px; }
    .group ul { margin: 0; padding-left: 18px; }
    .empty { color: var(--muted); margin-top: 8px; }
    .btn {
      padding: 8px 10px; border: 1px solid var(--border);
      background: transparent; color: var(--text); border-radius: 6px; cursor: pointer;
    }
    /* Dynamic course title */
    #course-title {
      display: none; font-size: 22px; background: var(--bg); padding: 8px 0; z-index: 10;
    }
    #course-title.visible {
      display: block; margin-top: 32px; margin-bottom: 8px;
      position: sticky; top: 0; border-bottom: 1px solid var(--border);
    }

    /* ===== PDF list sizing & spacing ===== */
    #pdfs ul { margin: 4px 0 0 1rem; }
    #pdfs li { margin: 3px 0 !important; }
    #pdfs li a {
      display: block; font-size: 1.05em; line-height: 1.3;
      padding: 4px 6px; border-radius: 4px; transition: background .2s, color .2s;
    }
    #pdfs li a:hover { background: rgba(0,0,139,.08); text-decoration: none; }
    body.dark #pdfs li a:hover { background: rgba(77,163,255,.18); }

    /* ===== Dark-mode tweaks ===== */
    body.dark h1, body.dark h2 { color: #fff; }
    body.dark #intro { color: #ddd; }
    body.dark .sidebar { background: #1e1e1e; border-right: 1px solid #444; }
    body.dark .sidebar h2, body.dark .sidebar a { color: #f0f0f0; }
    body.dark .content a, body.dark .content a:link, body.dark .content a:visited { color: #4da3ff !important; }
    body.dark .content a:hover, body.dark .content a:focus { color: #80c0ff !important; }

    /* ===== MOBILE: stack sidebar on top, full-width content ===== */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: static;   /* no sticky on mobile */
        float: none;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }
      .content { margin-left: 0; }
      /* optional: tighten paddings a bit on small screens */
      .content { padding: 16px; }
      .sidebar a { padding: 8px 10px; }
      #course-title.visible { top: 0; }
    }
  </style>
</head>
<body class="light">
  <div class="sidebar">
    <h2>Subjects</h2>
    <ul id="subject-list">
      <li><a href="#" data-subject="ALL" class="active">All PDFs</a></li>
      <li><a href="#" data-subject="CIVL6415">CIVL6415</a></li>
      <li><a href="#" data-subject="MATH3301">MATH3301</a></li>
      <li><a href="#" data-subject="MATH3405">MATH3405</a></li>
    </ul>
    <div class="toggle-wrap">
      <button id="toggle-dark" class="btn">ðŸŒ™ Toggle Dark Mode</button>
    </div>
  </div>

  <div class="content">
    <h1>Welcome to My Uni Notes</h1>
    <p id="intro">Semester 2, 2025 notes. Use the sidebar to switch subjects, search below to filter PDFs.</p>

    <h2 id="course-title"></h2>

    <input type="text" id="search" placeholder="Search notes... (filters filenames)">
    <div id="pdfs" class="group"></div>
  </div>

  <script>
    // ---- CONFIG ----
    const PJSON_URL = "pdfs.json";
    const SUBJECTS = ["CIVL6415", "MATH3301", "MATH3405"];
    const SUBJECT_TITLES = {
      "CIVL6415": "CIVL6415 Traffic Analysis and Simulation",
      "MATH3301": "MATH3301 Graph Theory & Design Theory",
      "MATH3405": "MATH3405 Differential Geometry"
    };

    // ---- STATE ----
    let data = {};
    let currentSubject = "ALL";
    let query = "";

    // ---- DOM ----
    const pdfContainer   = document.getElementById("pdfs");
    const searchInput    = document.getElementById("search");
    const subjectList    = document.getElementById("subject-list");
    const toggl
