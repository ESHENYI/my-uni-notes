<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My Uni Notes</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: background 0.3s, color 0.3s; }
    .sidebar { width: 220px; height: 100vh; background: var(--sidebar-bg); padding: 16px; float:left; border-right:1px solid var(--border); }
    .content { margin-left: 240px; padding: 20px; }
    h1 { margin-top:0; }
    a { color: var(--link); text-decoration:none; }
    a:hover { text-decoration:underline; }
    #search { width: 100%; padding: 6px; margin-bottom: 10px; }
    .dark { --bg: #121212; --text: #f0f0f0; --link: #80b3ff; --sidebar-bg: #1e1e1e; --border: #333; }
    .light { --bg: #ffffff; --text: #000000; --link: blue; --sidebar-bg: #f3f3f3; --border: #ddd; }
  </style>
</head>
<body class="light">
  <div class="sidebar">
    <h2>Subjects</h2>
    <ul>
      <li><a href="#pdfs">All PDFs</a></li>
    </ul>
    <button id="toggle-dark">ðŸŒ™ Toggle Dark Mode</button>
  </div>

  <div class="content">
    <h1>Welcome to My Uni Notes</h1>
    <input type="text" id="search" placeholder="Search notes...">

    <div id="pdfs"></div>
  </div>

  <script>
    const pdfContainer = document.getElementById("pdfs");
    const searchInput = document.getElementById("search");

    // Load JSON with grouped PDFs
    fetch("pdfs.json")
      .then(r => r.json())
      .then(data => {
        renderPDFs(data);

        searchInput.addEventListener("input", () => {
          const q = searchInput.value.toLowerCase();
          renderPDFs(data, q);
        });
      });

    function renderPDFs(groups, query="") {
      pdfContainer.innerHTML = "";
      for (const subject in groups) {
        const files = groups[subject];
        const subjectDiv = document.createElement("div");
        const heading = document.createElement("h2");
        heading.textContent = subject;
        subjectDiv.appendChild(heading);

        const list = document.createElement("ul");
        files.forEach(file => {
          const fileName = file.replace(/\.pdf$/i, "");
          if (fileName.toLowerCase().includes(query)) {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = `files/${encodeURIComponent(subject.toLowerCase())}/${encodeURIComponent(file)}`;
            a.target = "_blank";
            a.rel = "noopener";
            a.textContent = fileName;
            li.appendChild(a);
            list.appendChild(li);
          }
        });
        if (list.children.length > 0) {
          subjectDiv.appendChild(list);
          pdfContainer.appendChild(subjectDiv);
        }
      }
    }

    // Dark mode toggle
    const toggleBtn = document.getElementById("toggle-dark");
    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
    });
  </script>
</body>
</html>
